#!/bin/bash

################################################################################
#                                                                              #
#                                 {o,o}                                        #
#                                 |)__)                                        #
#                                 -"-"-                                        #
#                                                                              #
################################################################################
#
# Looks at backup configs and list backup chains
#
##############################---VARIABLES---###################################

BACKUP_STATUS=0

################################################################################

###############################---WORKDIR---####################################

cd $( dirname $0 )

################################################################################

##############################---FUNCTIONS---###################################

function chackForBackup() {
  mkdir /opt/backup/chains
  for backup in *.conf
  do
    . "./${backup}"
    . "${BACKUP_BACKEND}.cf"
    echo "Collection status for ${BACKUP_NAME}: "
    duplicity collection-status $DESTINATION_URL | tee "/opt/backup/chains/${BACKUP_NAME}"
  done
  exit ${BACKUP_STATUS}
}

################################################################################

###############################---EXECUTION---##################################

chackForBackup

################################################################################
